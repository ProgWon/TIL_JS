# 배열 러버덕

배열은 여러 개의 값을 **순차적** 으로 나열한 자료 구조입니다. 여기서 순차적이라는 말이 중요합니다. 순차적의 사전적 의미는 순서를 따라서 차례차례 하는 것을 의미합니다. 즉, 배열은 순서가 존재하고 중요하다고 볼 수 있습니다.

배열 리터럴을 통해서 배열을 생성해보겠습니다. 이 배열이 가지고 있는 값을 element, 즉 요소라고 부릅니다. 그리고 이 요소에 접근하기 위해 사용하는것이 인덱스입니다.

자료 구조에서 말하는 배열은 동일한 크기의 메모리 공간이 빈틈없이 연속적으로 나열된 자료구조를 이야기 합니다.

이 말은 자료 구조로서의 배열의 요소는 하나의 데이터 타입으로 통일되어야 하고, 서로 연속적으로 인접해야 한다는 것을 의미합니다. 이런 배열을 밀집 배열이라고 부릅니다.

일반적인 의미인 배열은 각 요소가 동일한 데이터 크기를 가지고 빈틈없이 연속적으로 이어져 있어 인덱스를 통해 단 한번의 연산으로 임의 접근이 가능합니다.

(그림 그리기)

만약 위 그림과 같이 메모리 주소가 1000에서 시작하고 요소의 크기가 8 바이트인 배열을 생각해보면 

(연산 그리기)

이렇게 인덱스를 통해 효율적으로 요소 접근이 가능합니다. 하지만 정렬되지 않은 경우 O(N) 의 선형 검색 시간이 필요할 수도 있고 요소를 삽입 삭제의 경우 연속성을 유지하기 위해 요소를 이동 시켜야 하는 단점도 있습니다.

하지만 자바스크립트의 배열은 경우 일반적인 의미의 배열과는 다릅니다. 메모리 공간은 동일하지 않아도 되며 연속적으로 이어져 있지 않을 수도 있습니다. 이것을 희소 배열이라고 합니다.

엄밀히 말하자면 자바스크립트의 배열은 일반적인 의미의 배열이라고 할 수 없습니다. 자바스크립트의 배열은 희소 배열이 될 수 있습니다. 따라서 자바스크립트의 배열은 배열의 동작을 흉내낸 특수한 객체라고 할 수 있습니다.

희소 배열이 생기는 대표적인 예제는 배열의 length 프로퍼티에 값보다 큰 숫자를 할당하는 경우입니다.

이 경우에 배열을 출력하면 empty 가 마치 추가된 요소처럼 보이지만 이 곳에 값은 존재하지 않습니다. 이 예제와는 달리 배열의 중간이나 앞 부분이 empty 인 경우 연속적으로 위치하지 않게 됩니다.

희소 배열은 연속적인 값의 집합이라는 배열의 기본적인 개념과 맞지 않아 사용하지 않는 것이 좋습니다. 또한 최적화가 잘 되어있는 모던 자바스크립트 엔진의 경우 요소의 타입이 이리하는 배열을 생성할 때에 일반적 의미의 배열처럼 사용할 수 있도록 연속된 메모리 공간을 확보하는 것으로 알려져 있습니다.

즉, 배열을 생성할 때 희소배열을 생성하지 않도록 주의하는 것이 좋습니다. 배열은 같은 타입의 요소를 연속적으로 위치 시키는 것이 최선입니다.

